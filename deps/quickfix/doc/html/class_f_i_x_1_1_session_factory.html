<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>QuickFIX: FIX::SessionFactory Class Reference</title>
<link href="quickfix.css" rel="stylesheet" type="text/css">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td>
	<img src="images/QuickFIX.jpg" align="middle" border=0>
	&nbsp;&nbsp;
	<a href="index.html">Index</a>&nbsp;
	<a href="files.html">Source Files</a>&nbsp;
	<a href="annotated.html">Annotated Class List</a>&nbsp;
	<a href="classes.html">Alphabetical Class List</a>&nbsp;
	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;
	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;
   </td>
  </tr>
</table>
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.6.3 -->
  <div class="navpath"><a class="el" href="namespace_f_i_x.html">FIX</a>::<a class="el" href="class_f_i_x_1_1_session_factory.html">SessionFactory</a>
  </div>
<div class="contents">
<h1>FIX::SessionFactory Class Reference</h1><!-- doxytag: class="FIX::SessionFactory" -->
<p>Responsible for creating <a class="el" href="class_f_i_x_1_1_session.html" title="Maintains the state and implements the logic of a FIX session.">Session</a> objects.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for FIX::SessionFactory:</div>
<div class="dynsection">
<div class="center"><img src="class_f_i_x_1_1_session_factory__coll__graph.png" border="0" usemap="#_f_i_x_1_1_session_factory_coll__map" alt="Collaboration graph"/></div>
<map name="_f_i_x_1_1_session_factory_coll__map" id="_f_i_x_1_1_session_factory_coll__map">
<area shape="rect" id="node2" href="class_f_i_x_1_1_application.html" title="This interface must be implemented to define what your FIX application does." alt="" coords="5,5,117,35"/><area shape="rect" id="node4" href="class_f_i_x_1_1_message_store_factory.html" title="This interface must be implemented to create a MessageStore." alt="" coords="141,5,317,35"/><area shape="rect" id="node6" href="class_f_i_x_1_1_log_factory.html" title="This interface must be implemented to create a Log." alt="" coords="351,5,463,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_f_i_x_1_1_session_factory-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a7f80acf778a0ce098a46ff68f0786f70">SessionFactory</a> (<a class="el" href="class_f_i_x_1_1_application.html">Application</a> &amp;application, <a class="el" href="class_f_i_x_1_1_message_store_factory.html">MessageStoreFactory</a> &amp;messageStoreFactory, <a class="el" href="class_f_i_x_1_1_log_factory.html">LogFactory</a> *pLogFactory)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#ad8cd87b2261545e3873a4e36eb83e8b3">~SessionFactory</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_f_i_x_1_1_session.html">Session</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a9fc30141e5785b31612e6942d4eb36b0">create</a> (const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;sessionID, const <a class="el" href="class_f_i_x_1_1_dictionary.html">Dictionary</a> &amp;settings)  throw ( ConfigError )</td></tr>
<tr><td colspan="2"><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; std::string, <br class="typebreak"/>
<a class="el" href="class_f_i_x_1_1_data_dictionary.html">DataDictionary</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a7bca6a48add52346062d066cbea4785a">Dictionaries</a></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_f_i_x_1_1_data_dictionary.html">DataDictionary</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a89ba37bd60a47e892bbac743cfa0dd51">createDataDictionary</a> (const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;sessionID, const <a class="el" href="class_f_i_x_1_1_dictionary.html">Dictionary</a> &amp;settings, const std::string &amp;settingsKey)  throw (ConfigError)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a0a142fc93c5ca17d2240331efe2a23db">processFixtDataDictionaries</a> (const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;sessionID, const <a class="el" href="class_f_i_x_1_1_dictionary.html">Dictionary</a> &amp;settings, <a class="el" href="class_f_i_x_1_1_data_dictionary_provider.html">DataDictionaryProvider</a> &amp;provider)  throw (ConfigError)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a556487af7c9920d14d26414dda22ef8f">processFixDataDictionary</a> (const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;sessionID, const <a class="el" href="class_f_i_x_1_1_dictionary.html">Dictionary</a> &amp;settings, <a class="el" href="class_f_i_x_1_1_data_dictionary_provider.html">DataDictionaryProvider</a> &amp;provider)  throw (ConfigError)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a72b2656f23894501a72a58347f904dfa">toApplVerID</a> (const std::string &amp;value)</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_f_i_x_1_1_application.html">Application</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a368d49b2e97b5f6670eb27c80fab5ed4">m_application</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_f_i_x_1_1_message_store_factory.html">MessageStoreFactory</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a025a98cade0657adb20d25e6209c6fa9">m_messageStoreFactory</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_f_i_x_1_1_log_factory.html">LogFactory</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a54e70754001525a06f47f882f8683a13">m_pLogFactory</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_f_i_x_1_1_session_factory.html#a7bca6a48add52346062d066cbea4785a">Dictionaries</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_f_i_x_1_1_session_factory.html#a2473a148a225d28377aa38f12705a0ca">m_dictionaries</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Responsible for creating <a class="el" href="class_f_i_x_1_1_session.html" title="Maintains the state and implements the logic of a FIX session.">Session</a> objects. </p>
<p>This factory will use QuickFIX <a class="el" href="class_f_i_x_1_1_session_i_d.html" title="Unique session id consists of BeginString, SenderCompID and TargetCompID.">SessionID</a>, <a class="el" href="class_f_i_x_1_1_dictionary.html" title="For storage and retrieval of key/value pairs.">Dictionary</a> settings, <a class="el" href="class_f_i_x_1_1_message_store_factory.html" title="This interface must be implemented to create a MessageStore.">MessageStoreFactory</a>, and optional <a class="el" href="class_f_i_x_1_1_log_factory.html" title="This interface must be implemented to create a Log.">LogFactory</a> to create all the required sessions for an <a class="el" href="class_f_i_x_1_1_application.html" title="This interface must be implemented to define what your FIX application does.">Application</a>. </p>

<p>Definition at line <a class="el" href="_session_factory_8h_source.html#l00046">46</a> of file <a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a7bca6a48add52346062d066cbea4785a"></a><!-- doxytag: member="FIX::SessionFactory::Dictionaries" ref="a7bca6a48add52346062d066cbea4785a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt; std::string, <a class="el" href="class_f_i_x_1_1_data_dictionary.html">DataDictionary</a>* &gt; <a class="el" href="class_f_i_x_1_1_session_factory.html#a7bca6a48add52346062d066cbea4785a">FIX::SessionFactory::Dictionaries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8h_source.html#l00062">62</a> of file <a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7f80acf778a0ce098a46ff68f0786f70"></a><!-- doxytag: member="FIX::SessionFactory::SessionFactory" ref="a7f80acf778a0ce098a46ff68f0786f70" args="(Application &amp;application, MessageStoreFactory &amp;messageStoreFactory, LogFactory *pLogFactory)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FIX::SessionFactory::SessionFactory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_f_i_x_1_1_application.html">Application</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>application</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_f_i_x_1_1_message_store_factory.html">MessageStoreFactory</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>messageStoreFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_f_i_x_1_1_log_factory.html">LogFactory</a> *&nbsp;</td>
          <td class="paramname"> <em>pLogFactory</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8h_source.html#l00049">49</a> of file <a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00052"></a>00052 : <a class="code" href="class_f_i_x_1_1_session_factory.html#a368d49b2e97b5f6670eb27c80fab5ed4">m_application</a>( application ),
<a name="l00053"></a>00053   <a class="code" href="class_f_i_x_1_1_session_factory.html#a025a98cade0657adb20d25e6209c6fa9">m_messageStoreFactory</a>( messageStoreFactory ),
<a name="l00054"></a>00054   <a class="code" href="class_f_i_x_1_1_session_factory.html#a54e70754001525a06f47f882f8683a13">m_pLogFactory</a>( pLogFactory ) {}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ad8cd87b2261545e3873a4e36eb83e8b3"></a><!-- doxytag: member="FIX::SessionFactory::~SessionFactory" ref="ad8cd87b2261545e3873a4e36eb83e8b3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FIX::SessionFactory::~SessionFactory </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8cpp_source.html#l00036">36</a> of file <a class="el" href="_session_factory_8cpp_source.html">SessionFactory.cpp</a>.</p>

<p>References <a class="el" href="_session_factory_8h_source.html#l00081">m_dictionaries</a>, <a class="el" href="_call_stack_8h_source.html#l00159">QF_STACK_IGNORE_BEGIN</a>, and <a class="el" href="_call_stack_8h_source.html#l00160">QF_STACK_IGNORE_END</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00037"></a>00037 { <a class="code" href="_call_stack_8h.html#a49c0ab56f70bb7289bd7f1af7b2b143c">QF_STACK_IGNORE_BEGIN</a>
<a name="l00038"></a>00038   Dictionaries::iterator i = <a class="code" href="class_f_i_x_1_1_session_factory.html#a2473a148a225d28377aa38f12705a0ca">m_dictionaries</a>.begin();
<a name="l00039"></a>00039   <span class="keywordflow">for</span> ( ; i != <a class="code" href="class_f_i_x_1_1_session_factory.html#a2473a148a225d28377aa38f12705a0ca">m_dictionaries</a>.end(); ++i )
<a name="l00040"></a>00040     <span class="keyword">delete</span> i-&gt;second;
<a name="l00041"></a>00041   <a class="code" href="_call_stack_8h.html#ae56fa5996c18d937643487f94ce9a8ca">QF_STACK_IGNORE_END</a>
<a name="l00042"></a>00042 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9fc30141e5785b31612e6942d4eb36b0"></a><!-- doxytag: member="FIX::SessionFactory::create" ref="a9fc30141e5785b31612e6942d4eb36b0" args="(const SessionID &amp;sessionID, const Dictionary &amp;settings)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_i_x_1_1_session.html">Session</a> * FIX::SessionFactory::create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>sessionID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_dictionary.html">Dictionary</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>settings</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw ( <a class="el" href="struct_f_i_x_1_1_config_error.html">ConfigError</a> )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8cpp_source.html#l00044">44</a> of file <a class="el" href="_session_factory_8cpp_source.html">SessionFactory.cpp</a>.</p>

<p>References <a class="el" href="_session_settings_8h_source.html#l00058">FIX::CHECK_COMPID</a>, <a class="el" href="_session_settings_8h_source.html#l00059">FIX::CHECK_LATENCY</a>, <a class="el" href="_session_settings_8h_source.html#l00042">FIX::CONNECTION_TYPE</a>, <a class="el" href="_field_convertors_8h_source.html#l00490">FIX::UtcTimeOnlyConvertor::convert()</a>, <a class="el" href="_session_settings_8h_source.html#l00041">FIX::DEFAULT_APPLVERID</a>, <a class="el" href="_session_settings_8h_source.html#l00053">FIX::END_DAY</a>, <a class="el" href="_session_settings_8h_source.html#l00051">FIX::END_TIME</a>, <a class="el" href="_field_types_8h_source.html#l00120">FIX::DateTime::getHour()</a>, <a class="el" href="_field_types_8h_source.html#l00126">FIX::DateTime::getMinute()</a>, <a class="el" href="_field_types_8h_source.html#l00132">FIX::DateTime::getSecond()</a>, <a class="el" href="_session_settings_8h_source.html#l00061">FIX::HEARTBTINT</a>, <a class="el" href="_time_range_8h_source.html#l00043">FIX::TimeRange::isInRange()</a>, <a class="el" href="_session_settings_8h_source.html#l00056">FIX::LOGON_DAY</a>, <a class="el" href="_session_settings_8h_source.html#l00054">FIX::LOGON_TIME</a>, <a class="el" href="_session_settings_8h_source.html#l00073">FIX::LOGON_TIMEOUT</a>, <a class="el" href="_session_settings_8h_source.html#l00057">FIX::LOGOUT_DAY</a>, <a class="el" href="_session_settings_8h_source.html#l00055">FIX::LOGOUT_TIME</a>, <a class="el" href="_session_settings_8h_source.html#l00074">FIX::LOGOUT_TIMEOUT</a>, <a class="el" href="_session_settings_8h_source.html#l00060">FIX::MAX_LATENCY</a>, <a class="el" href="_session_settings_8h_source.html#l00124">FIX::MILLISECONDS_IN_TIMESTAMP</a>, <a class="el" href="_session_settings_8h_source.html#l00126">FIX::PERSIST_MESSAGES</a>, <a class="el" href="_call_stack_8h_source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h_source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_session_settings_8h_source.html#l00123">FIX::REFRESH_ON_LOGON</a>, <a class="el" href="_session_settings_8h_source.html#l00122">FIX::RESET_ON_DISCONNECT</a>, <a class="el" href="_session_settings_8h_source.html#l00120">FIX::RESET_ON_LOGON</a>, <a class="el" href="_session_settings_8h_source.html#l00121">FIX::RESET_ON_LOGOUT</a>, <a class="el" href="_session_settings_8h_source.html#l00045">FIX::SEND_REDUNDANT_RESENDREQUESTS</a>, <a class="el" href="_session_settings_8h_source.html#l00040">FIX::SESSION_QUALIFIER</a>, <a class="el" href="_session_8h_source.html#l00139">FIX::Session::setCheckCompId()</a>, <a class="el" href="_session_8h_source.html#l00144">FIX::Session::setCheckLatency()</a>, <a class="el" href="_session_8h_source.html#l00119">FIX::Session::setLogonTime()</a>, <a class="el" href="_session_8h_source.html#l00154">FIX::Session::setLogonTimeout()</a>, <a class="el" href="_session_8h_source.html#l00159">FIX::Session::setLogoutTimeout()</a>, <a class="el" href="_session_8h_source.html#l00149">FIX::Session::setMaxLatency()</a>, <a class="el" href="_session_8h_source.html#l00184">FIX::Session::setMillisecondsInTimeStamp()</a>, <a class="el" href="_session_8h_source.html#l00189">FIX::Session::setPersistMessages()</a>, <a class="el" href="_session_8h_source.html#l00179">FIX::Session::setRefreshOnLogon()</a>, <a class="el" href="_session_8h_source.html#l00174">FIX::Session::setResetOnDisconnect()</a>, <a class="el" href="_session_8h_source.html#l00164">FIX::Session::setResetOnLogon()</a>, <a class="el" href="_session_8h_source.html#l00169">FIX::Session::setResetOnLogout()</a>, <a class="el" href="_session_8h_source.html#l00124">FIX::Session::setSenderDefaultApplVerID()</a>, <a class="el" href="_session_8h_source.html#l00134">FIX::Session::setSendRedundantResendRequests()</a>, <a class="el" href="_session_settings_8h_source.html#l00052">FIX::START_DAY</a>, <a class="el" href="_session_settings_8h_source.html#l00050">FIX::START_TIME</a>, <a class="el" href="_message_8h_source.html#l00249">FIX::Message::toApplVerID()</a>, <a class="el" href="_session_settings_8h_source.html#l00043">FIX::USE_DATA_DICTIONARY</a>, and <a class="el" href="_session_settings_8h_source.html#l00049">FIX::USE_LOCAL_TIME</a>.</p>

<p>Referenced by <a class="el" href="_initiator_8cpp_source.html#l00062">FIX::Initiator::initialize()</a>, and <a class="el" href="_acceptor_8cpp_source.html#l00070">FIX::Acceptor::initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00046"></a>00046 { <a class="code" href="_call_stack_8h.html#a3b1ffd24ab4b24161008f4867150f4c8">QF_STACK_PUSH</a>(<a class="code" href="class_f_i_x_1_1_session_factory.html#a9fc30141e5785b31612e6942d4eb36b0">SessionFactory::create</a>)
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   std::<span class="keywordtype">string</span> connectionType = settings.getString( <a class="code" href="namespace_f_i_x.html#a41729e2db627606df4e451155145da49">CONNECTION_TYPE</a> );
<a name="l00049"></a>00049   if ( connectionType != &quot;acceptor&quot; &amp;&amp; connectionType != &quot;initiator&quot; )
<a name="l00050"></a>00050     throw ConfigError( &quot;Invalid ConnectionType&quot; );
<a name="l00051"></a>00051 
<a name="l00052"></a>00052   if( connectionType == &quot;acceptor&quot; &amp;&amp; settings.has(<a class="code" href="namespace_f_i_x.html#a5dc68324d3b9f6c6b03d3b0a2ed4e28f">SESSION_QUALIFIER</a>) )
<a name="l00053"></a>00053     throw ConfigError( &quot;SessionQualifier cannot be used with acceptor.&quot; );
<a name="l00054"></a>00054 
<a name="l00055"></a>00055   <span class="keywordtype">bool</span> useDataDictionary = true;
<a name="l00056"></a>00056   if ( settings.has( <a class="code" href="namespace_f_i_x.html#a860cdbfc9324811ce83af8080df507ba">USE_DATA_DICTIONARY</a> ) )
<a name="l00057"></a>00057     useDataDictionary = settings.getBool( <a class="code" href="namespace_f_i_x.html#a860cdbfc9324811ce83af8080df507ba">USE_DATA_DICTIONARY</a> );
<a name="l00058"></a>00058 
<a name="l00059"></a>00059   std::<span class="keywordtype">string</span> defaultApplVerID;
<a name="l00060"></a>00060   if( sessionID.isFIXT() )
<a name="l00061"></a>00061   {
<a name="l00062"></a>00062     <span class="keywordflow">if</span>( !settings.has(<a class="code" href="namespace_f_i_x.html#acdc82ffce5d305d9ff4d9e88cb7bf8db">DEFAULT_APPLVERID</a>) )
<a name="l00063"></a>00063     {
<a name="l00064"></a>00064       <span class="keywordflow">throw</span> ConfigError(<span class="stringliteral">&quot;ApplVerID is required for FIXT transport&quot;</span>);
<a name="l00065"></a>00065     }
<a name="l00066"></a>00066     defaultApplVerID = <a class="code" href="class_f_i_x_1_1_session_factory.html#a72b2656f23894501a72a58347f904dfa">Message::toApplVerID</a>( settings.getString(<a class="code" href="namespace_f_i_x.html#acdc82ffce5d305d9ff4d9e88cb7bf8db">DEFAULT_APPLVERID</a>) );
<a name="l00067"></a>00067   }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069   DataDictionaryProvider dataDictionaryProvider;
<a name="l00070"></a>00070   <span class="keywordflow">if</span>( useDataDictionary )
<a name="l00071"></a>00071   {
<a name="l00072"></a>00072     <span class="keywordflow">if</span>( sessionID.isFIXT() )
<a name="l00073"></a>00073     {
<a name="l00074"></a>00074       <a class="code" href="class_f_i_x_1_1_session_factory.html#a0a142fc93c5ca17d2240331efe2a23db">processFixtDataDictionaries</a>(sessionID, settings, dataDictionaryProvider);
<a name="l00075"></a>00075     }
<a name="l00076"></a>00076     <span class="keywordflow">else</span>
<a name="l00077"></a>00077     {
<a name="l00078"></a>00078       <a class="code" href="class_f_i_x_1_1_session_factory.html#a556487af7c9920d14d26414dda22ef8f">processFixDataDictionary</a>(sessionID, settings, dataDictionaryProvider);
<a name="l00079"></a>00079     }
<a name="l00080"></a>00080   }
<a name="l00081"></a>00081 
<a name="l00082"></a>00082   <span class="keywordtype">bool</span> useLocalTime = <span class="keyword">false</span>;
<a name="l00083"></a>00083   <span class="keywordflow">if</span>( settings.has(<a class="code" href="namespace_f_i_x.html#a138cdef9d950f79c9a4427e8865ca8b7">USE_LOCAL_TIME</a>) )
<a name="l00084"></a>00084     useLocalTime = settings.getBool( <a class="code" href="namespace_f_i_x.html#a138cdef9d950f79c9a4427e8865ca8b7">USE_LOCAL_TIME</a> );
<a name="l00085"></a>00085 
<a name="l00086"></a>00086   <span class="keywordtype">int</span> startDay = -1;
<a name="l00087"></a>00087   <span class="keywordtype">int</span> endDay = -1;
<a name="l00088"></a>00088   <span class="keywordflow">try</span>
<a name="l00089"></a>00089   {
<a name="l00090"></a>00090     startDay = settings.getDay( <a class="code" href="namespace_f_i_x.html#aeb5a0071ace6c37dba8302585f70712c">START_DAY</a> );
<a name="l00091"></a>00091     endDay = settings.getDay( <a class="code" href="namespace_f_i_x.html#a7eb2c0e86cf81d483bf6d7d58a42b60c">END_DAY</a> );
<a name="l00092"></a>00092   }
<a name="l00093"></a>00093   <span class="keywordflow">catch</span>( ConfigError &amp; ) {}
<a name="l00094"></a>00094   <span class="keywordflow">catch</span>( FieldConvertError &amp; e ) { <span class="keywordflow">throw</span> ConfigError( e.what() ); }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096   <a class="code" href="namespace_f_i_x_1_1_t_y_p_e.html#aaa75e9d3541784ef1a7e08e68ef39053a0635dba5e599fcf8a0ed7470aa77d67f">UtcTimeOnly</a> startTime;
<a name="l00097"></a>00097   <a class="code" href="namespace_f_i_x_1_1_t_y_p_e.html#aaa75e9d3541784ef1a7e08e68ef39053a0635dba5e599fcf8a0ed7470aa77d67f">UtcTimeOnly</a> endTime;
<a name="l00098"></a>00098   <span class="keywordflow">try</span>
<a name="l00099"></a>00099   {
<a name="l00100"></a>00100     startTime = <a class="code" href="struct_f_i_x_1_1_utc_time_only_convertor.html#ae7d6cd4fc16490e217a5b8557ee65607">UtcTimeOnlyConvertor::convert</a>
<a name="l00101"></a>00101                 ( settings.getString( <a class="code" href="namespace_f_i_x.html#abd3d01ae9b6d7cb2d8796cf75b3c3073">START_TIME</a> ) );
<a name="l00102"></a>00102     endTime = <a class="code" href="struct_f_i_x_1_1_utc_time_only_convertor.html#ae7d6cd4fc16490e217a5b8557ee65607">UtcTimeOnlyConvertor::convert</a>
<a name="l00103"></a>00103               ( settings.getString( <a class="code" href="namespace_f_i_x.html#ad507d4c4c5730289c7c1e3a651f5143d">END_TIME</a> ) );
<a name="l00104"></a>00104   }
<a name="l00105"></a>00105   <span class="keywordflow">catch</span> ( FieldConvertError &amp; e ) { <span class="keywordflow">throw</span> ConfigError( e.what() ); }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107   TimeRange utcSessionTime
<a name="l00108"></a>00108     ( startTime, endTime, startDay, endDay );
<a name="l00109"></a>00109   TimeRange localSessionTime
<a name="l00110"></a>00110     ( LocalTimeOnly(startTime.getHour(), startTime.getMinute(), startTime.getSecond()),
<a name="l00111"></a>00111       LocalTimeOnly(endTime.getHour(), endTime.getMinute(), endTime.getSecond()),
<a name="l00112"></a>00112       startDay, endDay );
<a name="l00113"></a>00113   TimeRange sessionTimeRange = useLocalTime ? localSessionTime : utcSessionTime;
<a name="l00114"></a>00114 
<a name="l00115"></a>00115   <span class="keywordflow">if</span>( startDay &gt;= 0 &amp;&amp; endDay &lt; 0 )
<a name="l00116"></a>00116     <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">&quot;StartDay used without EndDay&quot;</span> );
<a name="l00117"></a>00117   <span class="keywordflow">if</span>( endDay &gt;= 0 &amp;&amp; startDay &lt; 0 )
<a name="l00118"></a>00118     <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">&quot;EndDay used without StartDay&quot;</span> );
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   HeartBtInt heartBtInt( 0 );
<a name="l00121"></a>00121   <span class="keywordflow">if</span> ( connectionType == <span class="stringliteral">&quot;initiator&quot;</span> )
<a name="l00122"></a>00122   {
<a name="l00123"></a>00123     heartBtInt = HeartBtInt( settings.getLong( <a class="code" href="namespace_f_i_x.html#a7305642d06d85b8cb81567a4d2157ab7">HEARTBTINT</a> ) );
<a name="l00124"></a>00124     <span class="keywordflow">if</span> ( heartBtInt &lt;= 0 ) <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">&quot;Heartbeat must be greater than zero&quot;</span> );
<a name="l00125"></a>00125   }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127   Session* pSession = 0;
<a name="l00128"></a>00128   pSession = <span class="keyword">new</span> Session( <a class="code" href="class_f_i_x_1_1_session_factory.html#a368d49b2e97b5f6670eb27c80fab5ed4">m_application</a>, <a class="code" href="class_f_i_x_1_1_session_factory.html#a025a98cade0657adb20d25e6209c6fa9">m_messageStoreFactory</a>,
<a name="l00129"></a>00129                           sessionID, dataDictionaryProvider, sessionTimeRange,
<a name="l00130"></a>00130                           heartBtInt, <a class="code" href="class_f_i_x_1_1_session_factory.html#a54e70754001525a06f47f882f8683a13">m_pLogFactory</a> );
<a name="l00131"></a>00131 
<a name="l00132"></a>00132   pSession-&gt;setSenderDefaultApplVerID(defaultApplVerID);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134   <span class="keywordtype">int</span> logonDay = startDay;
<a name="l00135"></a>00135   <span class="keywordtype">int</span> logoutDay = endDay;
<a name="l00136"></a>00136   <span class="keywordflow">try</span>
<a name="l00137"></a>00137   {
<a name="l00138"></a>00138     logonDay = settings.getDay( <a class="code" href="namespace_f_i_x.html#aa178eff0ac02284d032d55fa307641e0">LOGON_DAY</a> );
<a name="l00139"></a>00139     logoutDay = settings.getDay( <a class="code" href="namespace_f_i_x.html#aa0634e350186ea64cc3dc7779462e948">LOGOUT_DAY</a> );
<a name="l00140"></a>00140   }
<a name="l00141"></a>00141   <span class="keywordflow">catch</span>( ConfigError &amp; ) {}
<a name="l00142"></a>00142   <span class="keywordflow">catch</span>( FieldConvertError &amp; e ) { <span class="keywordflow">throw</span> ConfigError( e.what() ); }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144   <a class="code" href="namespace_f_i_x_1_1_t_y_p_e.html#aaa75e9d3541784ef1a7e08e68ef39053a0635dba5e599fcf8a0ed7470aa77d67f">UtcTimeOnly</a> logonTime( startTime );
<a name="l00145"></a>00145   <a class="code" href="namespace_f_i_x_1_1_t_y_p_e.html#aaa75e9d3541784ef1a7e08e68ef39053a0635dba5e599fcf8a0ed7470aa77d67f">UtcTimeOnly</a> logoutTime( endTime );
<a name="l00146"></a>00146   <span class="keywordflow">try</span>
<a name="l00147"></a>00147   {
<a name="l00148"></a>00148     logonTime = <a class="code" href="struct_f_i_x_1_1_utc_time_only_convertor.html#ae7d6cd4fc16490e217a5b8557ee65607">UtcTimeOnlyConvertor::convert</a>
<a name="l00149"></a>00149                 ( settings.getString( <a class="code" href="namespace_f_i_x.html#ac76d0d97b44fdf288618f0955652348a">LOGON_TIME</a> ) );
<a name="l00150"></a>00150   }
<a name="l00151"></a>00151   <span class="keywordflow">catch</span>( ConfigError &amp; ) {}
<a name="l00152"></a>00152   <span class="keywordflow">catch</span>( FieldConvertError &amp; e ) { <span class="keywordflow">throw</span> ConfigError( e.what() ); }
<a name="l00153"></a>00153   <span class="keywordflow">try</span>
<a name="l00154"></a>00154   {
<a name="l00155"></a>00155     logoutTime = <a class="code" href="struct_f_i_x_1_1_utc_time_only_convertor.html#ae7d6cd4fc16490e217a5b8557ee65607">UtcTimeOnlyConvertor::convert</a>
<a name="l00156"></a>00156               ( settings.getString( <a class="code" href="namespace_f_i_x.html#ac4283fde54ad52c672f91c519987fdd1">LOGOUT_TIME</a> ) );
<a name="l00157"></a>00157   }
<a name="l00158"></a>00158   <span class="keywordflow">catch</span>( ConfigError &amp; ) {}
<a name="l00159"></a>00159   <span class="keywordflow">catch</span>( FieldConvertError &amp; e ) { <span class="keywordflow">throw</span> ConfigError( e.what() ); }
<a name="l00160"></a>00160 
<a name="l00161"></a>00161   TimeRange utcLogonTime
<a name="l00162"></a>00162     ( logonTime, logoutTime, logonDay, logoutDay );
<a name="l00163"></a>00163   TimeRange localLogonTime
<a name="l00164"></a>00164     ( LocalTimeOnly(logonTime.getHour(), logonTime.getMinute(), logonTime.getSecond()),
<a name="l00165"></a>00165       LocalTimeOnly(logoutTime.getHour(), logoutTime.getMinute(), logoutTime.getSecond()),
<a name="l00166"></a>00166       logonDay, logoutDay );
<a name="l00167"></a>00167   TimeRange logonTimeRange = useLocalTime ? localLogonTime : utcLogonTime;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169   <span class="keywordflow">if</span>( !sessionTimeRange.isInRange(logonTime) )
<a name="l00170"></a>00170     <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">&quot;LogonTime must be between StartTime and EndTime&quot;</span> );
<a name="l00171"></a>00171   <span class="keywordflow">if</span>( !sessionTimeRange.isInRange(logoutTime) )
<a name="l00172"></a>00172     <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">&quot;LogoutTime must be between StartTime and EndTime&quot;</span> );
<a name="l00173"></a>00173   pSession-&gt;setLogonTime( logonTimeRange );
<a name="l00174"></a>00174 
<a name="l00175"></a>00175   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#a1dd04407b18768186e7c34fa6ae092c0">SEND_REDUNDANT_RESENDREQUESTS</a> ) )
<a name="l00176"></a>00176     pSession-&gt;setSendRedundantResendRequests( settings.getBool( <a class="code" href="namespace_f_i_x.html#a1dd04407b18768186e7c34fa6ae092c0">SEND_REDUNDANT_RESENDREQUESTS</a> ) );
<a name="l00177"></a>00177   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#a39337b7fb9d25b1f0df6c610618823b5">CHECK_COMPID</a> ) )
<a name="l00178"></a>00178     pSession-&gt;setCheckCompId( settings.getBool( <a class="code" href="namespace_f_i_x.html#a39337b7fb9d25b1f0df6c610618823b5">CHECK_COMPID</a> ) );
<a name="l00179"></a>00179   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#a9f491ec5b28b392577643dc2293311c3">CHECK_LATENCY</a> ) )
<a name="l00180"></a>00180     pSession-&gt;setCheckLatency( settings.getBool( <a class="code" href="namespace_f_i_x.html#a9f491ec5b28b392577643dc2293311c3">CHECK_LATENCY</a> ) );
<a name="l00181"></a>00181   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#ae0921bd1d9ee2e1217ac66f8a8e9c2cb">MAX_LATENCY</a> ) )
<a name="l00182"></a>00182     pSession-&gt;setMaxLatency( settings.getLong( <a class="code" href="namespace_f_i_x.html#ae0921bd1d9ee2e1217ac66f8a8e9c2cb">MAX_LATENCY</a> ) );
<a name="l00183"></a>00183   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#a1bdf17337385b7f3794eb4a57c83322f">LOGON_TIMEOUT</a> ) )
<a name="l00184"></a>00184     pSession-&gt;setLogonTimeout( settings.getLong( <a class="code" href="namespace_f_i_x.html#a1bdf17337385b7f3794eb4a57c83322f">LOGON_TIMEOUT</a> ) );
<a name="l00185"></a>00185   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#a02ee8e0d9b3de68689486ad8b77b1a21">LOGOUT_TIMEOUT</a> ) )
<a name="l00186"></a>00186     pSession-&gt;setLogoutTimeout( settings.getLong( <a class="code" href="namespace_f_i_x.html#a02ee8e0d9b3de68689486ad8b77b1a21">LOGOUT_TIMEOUT</a> ) );
<a name="l00187"></a>00187   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#ac98bce2c23136dd017d1e653b0cc3bd5">RESET_ON_LOGON</a> ) )
<a name="l00188"></a>00188     pSession-&gt;setResetOnLogon( settings.getBool( <a class="code" href="namespace_f_i_x.html#ac98bce2c23136dd017d1e653b0cc3bd5">RESET_ON_LOGON</a> ) );
<a name="l00189"></a>00189   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#a8619f038aa9cf800e7d4d7c6636dd1ab">RESET_ON_LOGOUT</a> ) )
<a name="l00190"></a>00190     pSession-&gt;setResetOnLogout( settings.getBool( <a class="code" href="namespace_f_i_x.html#a8619f038aa9cf800e7d4d7c6636dd1ab">RESET_ON_LOGOUT</a> ) );
<a name="l00191"></a>00191   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#adb1f0aaf19a81325a430c9913a80d2da">RESET_ON_DISCONNECT</a> ) )
<a name="l00192"></a>00192     pSession-&gt;setResetOnDisconnect( settings.getBool( <a class="code" href="namespace_f_i_x.html#adb1f0aaf19a81325a430c9913a80d2da">RESET_ON_DISCONNECT</a> ) );
<a name="l00193"></a>00193   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#a7fd943dc690440715eec47c3b0bd9e57">REFRESH_ON_LOGON</a> ) )
<a name="l00194"></a>00194     pSession-&gt;setRefreshOnLogon( settings.getBool( <a class="code" href="namespace_f_i_x.html#a7fd943dc690440715eec47c3b0bd9e57">REFRESH_ON_LOGON</a> ) );
<a name="l00195"></a>00195   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#af2c177a44b06f2e0f5084bc68aa30a7c">MILLISECONDS_IN_TIMESTAMP</a> ) )
<a name="l00196"></a>00196     pSession-&gt;setMillisecondsInTimeStamp( settings.getBool( <a class="code" href="namespace_f_i_x.html#af2c177a44b06f2e0f5084bc68aa30a7c">MILLISECONDS_IN_TIMESTAMP</a> ) );
<a name="l00197"></a>00197   <span class="keywordflow">if</span> ( settings.has( <a class="code" href="namespace_f_i_x.html#ad5346c0154839ba30792e11d37267b0f">PERSIST_MESSAGES</a> ) )
<a name="l00198"></a>00198     pSession-&gt;setPersistMessages( settings.getBool( <a class="code" href="namespace_f_i_x.html#ad5346c0154839ba30792e11d37267b0f">PERSIST_MESSAGES</a> ) );
<a name="l00199"></a>00199 
<a name="l00200"></a>00200   <span class="keywordflow">return</span> pSession;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202   <a class="code" href="_call_stack_8h.html#ac6b0115ca0a0988c881219c711c9c57e">QF_STACK_POP</a>
<a name="l00203"></a>00203 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a89ba37bd60a47e892bbac743cfa0dd51"></a><!-- doxytag: member="FIX::SessionFactory::createDataDictionary" ref="a89ba37bd60a47e892bbac743cfa0dd51" args="(const SessionID &amp;sessionID, const Dictionary &amp;settings, const std::string &amp;settingsKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_i_x_1_1_data_dictionary.html">DataDictionary</a> FIX::SessionFactory::createDataDictionary </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>sessionID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_dictionary.html">Dictionary</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>settingsKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw (<a class="el" href="struct_f_i_x_1_1_config_error.html">ConfigError</a>)<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8cpp_source.html#l00205">205</a> of file <a class="el" href="_session_factory_8cpp_source.html">SessionFactory.cpp</a>.</p>

<p>References <a class="el" href="_call_stack_8h_source.html#l00157">QF_STACK_PUSH</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00208"></a>00208 { <a class="code" href="_call_stack_8h.html#a3b1ffd24ab4b24161008f4867150f4c8">QF_STACK_PUSH</a>(<a class="code" href="class_f_i_x_1_1_session_factory.html#a89ba37bd60a47e892bbac743cfa0dd51">SessionFactory::createDataDictionary</a>)
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   DataDictionary dataDictionary;
<a name="l00211"></a>00211   std::<span class="keywordtype">string</span> path = settings.getString( settingsKey );
<a name="l00212"></a>00212   <a class="code" href="class_f_i_x_1_1_session_factory.html#a7bca6a48add52346062d066cbea4785a">Dictionaries</a>::iterator i = <a class="code" href="class_f_i_x_1_1_session_factory.html#a2473a148a225d28377aa38f12705a0ca">m_dictionaries</a>.find( path );
<a name="l00213"></a>00213   if ( i != <a class="code" href="class_f_i_x_1_1_session_factory.html#a2473a148a225d28377aa38f12705a0ca">m_dictionaries</a>.end() )
<a name="l00214"></a>00214     dataDictionary = *i-&gt;second;
<a name="l00215"></a>00215   else
<a name="l00216"></a>00216   {
<a name="l00217"></a>00217     DataDictionary* p = <span class="keyword">new</span> DataDictionary( path );
<a name="l00218"></a>00218     dataDictionary = *p;
<a name="l00219"></a>00219     <a class="code" href="class_f_i_x_1_1_session_factory.html#a2473a148a225d28377aa38f12705a0ca">m_dictionaries</a>[ path ] = p;
<a name="l00220"></a>00220   }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <span class="keywordflow">if</span>( settings.has( <a class="code" href="namespace_f_i_x.html#aa94407afda526be0a08ca2f2e867ffef">VALIDATE_FIELDS_OUT_OF_ORDER</a> ) )
<a name="l00223"></a>00223   {
<a name="l00224"></a>00224     dataDictionary.checkFieldsOutOfOrder
<a name="l00225"></a>00225     ( settings.getBool( <a class="code" href="namespace_f_i_x.html#aa94407afda526be0a08ca2f2e867ffef">VALIDATE_FIELDS_OUT_OF_ORDER</a> ) );
<a name="l00226"></a>00226   }
<a name="l00227"></a>00227   <span class="keywordflow">if</span>( settings.has( <a class="code" href="namespace_f_i_x.html#aa6fb84d381bcf048cfdbd54a18a98609">VALIDATE_FIELDS_HAVE_VALUES</a> ) )
<a name="l00228"></a>00228   {
<a name="l00229"></a>00229     dataDictionary.checkFieldsHaveValues
<a name="l00230"></a>00230     ( settings.getBool( <a class="code" href="namespace_f_i_x.html#aa6fb84d381bcf048cfdbd54a18a98609">VALIDATE_FIELDS_HAVE_VALUES</a> ) );
<a name="l00231"></a>00231   }
<a name="l00232"></a>00232   <span class="keywordflow">if</span>( settings.has( <a class="code" href="namespace_f_i_x.html#a907550991437e18603b9c5c7150a203b">VALIDATE_USER_DEFINED_FIELDS</a> ) )
<a name="l00233"></a>00233   {
<a name="l00234"></a>00234     dataDictionary.checkUserDefinedFields
<a name="l00235"></a>00235     ( settings.getBool( <a class="code" href="namespace_f_i_x.html#a907550991437e18603b9c5c7150a203b">VALIDATE_USER_DEFINED_FIELDS</a> ) );
<a name="l00236"></a>00236   }
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <span class="keywordflow">return</span> dataDictionary;    
<a name="l00239"></a>00239 
<a name="l00240"></a>00240   <a class="code" href="_call_stack_8h.html#ac6b0115ca0a0988c881219c711c9c57e">QF_STACK_POP</a>
<a name="l00241"></a>00241 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a556487af7c9920d14d26414dda22ef8f"></a><!-- doxytag: member="FIX::SessionFactory::processFixDataDictionary" ref="a556487af7c9920d14d26414dda22ef8f" args="(const SessionID &amp;sessionID, const Dictionary &amp;settings, DataDictionaryProvider &amp;provider)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FIX::SessionFactory::processFixDataDictionary </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>sessionID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_dictionary.html">Dictionary</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_f_i_x_1_1_data_dictionary_provider.html">DataDictionaryProvider</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>provider</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw (<a class="el" href="struct_f_i_x_1_1_config_error.html">ConfigError</a>)<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8cpp_source.html#l00277">277</a> of file <a class="el" href="_session_factory_8cpp_source.html">SessionFactory.cpp</a>.</p>

<p>References <a class="el" href="_session_settings_8h_source.html#l00046">FIX::DATA_DICTIONARY</a>, <a class="el" href="_call_stack_8h_source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h_source.html#l00157">QF_STACK_PUSH</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00280"></a>00280 { <a class="code" href="_call_stack_8h.html#a3b1ffd24ab4b24161008f4867150f4c8">QF_STACK_PUSH</a>(<a class="code" href="class_f_i_x_1_1_session_factory.html#a556487af7c9920d14d26414dda22ef8f">SessionFactory::processFixDataDictionary</a>)
<a name="l00281"></a>00281 
<a name="l00282"></a>00282   DataDictionary dataDictionary = <a class="code" href="class_f_i_x_1_1_session_factory.html#a89ba37bd60a47e892bbac743cfa0dd51">createDataDictionary</a>(sessionID, settings, <a class="code" href="namespace_f_i_x.html#a82c136c2102002df13a3103e89cfcb6f">DATA_DICTIONARY</a>);
<a name="l00283"></a>00283   provider.addTransportDataDictionary(sessionID.getBeginString(), dataDictionary);
<a name="l00284"></a>00284   provider.addApplicationDataDictionary(Message::<a class="code" href="class_f_i_x_1_1_session_factory.html#a72b2656f23894501a72a58347f904dfa">toApplVerID</a>(sessionID.getBeginString()), dataDictionary);
<a name="l00285"></a>00285 
<a name="l00286"></a>00286   <a class="code" href="_call_stack_8h.html#ac6b0115ca0a0988c881219c711c9c57e">QF_STACK_POP</a>
<a name="l00287"></a>00287 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a0a142fc93c5ca17d2240331efe2a23db"></a><!-- doxytag: member="FIX::SessionFactory::processFixtDataDictionaries" ref="a0a142fc93c5ca17d2240331efe2a23db" args="(const SessionID &amp;sessionID, const Dictionary &amp;settings, DataDictionaryProvider &amp;provider)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FIX::SessionFactory::processFixtDataDictionaries </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>sessionID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_f_i_x_1_1_dictionary.html">Dictionary</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>settings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_f_i_x_1_1_data_dictionary_provider.html">DataDictionaryProvider</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>provider</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throw (<a class="el" href="struct_f_i_x_1_1_config_error.html">ConfigError</a>)<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8cpp_source.html#l00243">243</a> of file <a class="el" href="_session_factory_8cpp_source.html">SessionFactory.cpp</a>.</p>

<p>References <a class="el" href="_session_settings_8h_source.html#l00048">FIX::APP_DATA_DICTIONARY</a>, <a class="el" href="_session_settings_8h_source.html#l00041">FIX::DEFAULT_APPLVERID</a>, <a class="el" href="_call_stack_8h_source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h_source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="namespace_f_i_x.html#aa5365f4618ace600a28d38c551d72a28">FIX::string_toUpper()</a>, and <a class="el" href="_session_settings_8h_source.html#l00047">FIX::TRANSPORT_DATA_DICTIONARY</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00246"></a>00246 { <a class="code" href="_call_stack_8h.html#a3b1ffd24ab4b24161008f4867150f4c8">QF_STACK_PUSH</a>(<a class="code" href="class_f_i_x_1_1_session_factory.html#a0a142fc93c5ca17d2240331efe2a23db">SessionFactory::processFixtDataDictionaries</a>)
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   DataDictionary dataDictionary = <a class="code" href="class_f_i_x_1_1_session_factory.html#a89ba37bd60a47e892bbac743cfa0dd51">createDataDictionary</a>(sessionID, settings, <a class="code" href="namespace_f_i_x.html#aa27889c54f067a4be84b3b558f37a897">TRANSPORT_DATA_DICTIONARY</a>);
<a name="l00249"></a>00249   provider.addTransportDataDictionary(sessionID.getBeginString(), dataDictionary);
<a name="l00250"></a>00250   
<a name="l00251"></a>00251   for(Dictionary::const_iterator data = settings.begin(); data != settings.end(); ++data)
<a name="l00252"></a>00252   {
<a name="l00253"></a>00253     <span class="keyword">const</span> std::string&amp; key = data-&gt;first;
<a name="l00254"></a>00254     <span class="keyword">const</span> std::string frontKey = key.substr(0, strlen(<a class="code" href="namespace_f_i_x.html#a1e58900acd63ed8238c28ddb14218112">APP_DATA_DICTIONARY</a>));
<a name="l00255"></a>00255     <span class="keywordflow">if</span>( frontKey == <a class="code" href="namespace_f_i_x.html#aa5365f4618ace600a28d38c551d72a28">string_toUpper</a>(<a class="code" href="namespace_f_i_x.html#a1e58900acd63ed8238c28ddb14218112">APP_DATA_DICTIONARY</a>) )
<a name="l00256"></a>00256     {
<a name="l00257"></a>00257       <span class="keywordflow">if</span>( key == <a class="code" href="namespace_f_i_x.html#aa5365f4618ace600a28d38c551d72a28">string_toUpper</a>(<a class="code" href="namespace_f_i_x.html#a1e58900acd63ed8238c28ddb14218112">APP_DATA_DICTIONARY</a>) )
<a name="l00258"></a>00258       {
<a name="l00259"></a>00259         DataDictionary dataDictionary = <a class="code" href="class_f_i_x_1_1_session_factory.html#a89ba37bd60a47e892bbac743cfa0dd51">createDataDictionary</a>(sessionID, settings, <a class="code" href="namespace_f_i_x.html#a1e58900acd63ed8238c28ddb14218112">APP_DATA_DICTIONARY</a>);
<a name="l00260"></a>00260         provider.addApplicationDataDictionary(<a class="code" href="class_f_i_x_1_1_message.html#a505796085beb224575f57ff69302aff3">Message::toApplVerID</a>(settings.getString(<a class="code" href="namespace_f_i_x.html#acdc82ffce5d305d9ff4d9e88cb7bf8db">DEFAULT_APPLVERID</a>)), dataDictionary);
<a name="l00261"></a>00261       }
<a name="l00262"></a>00262       <span class="keywordflow">else</span>
<a name="l00263"></a>00263       {
<a name="l00264"></a>00264         std::string::size_type offset = key.find(<span class="charliteral">&#39;.&#39;</span>);
<a name="l00265"></a>00265         <span class="keywordflow">if</span>( offset == std::string::npos )
<a name="l00266"></a>00266           <span class="keywordflow">throw</span> ConfigError(std::string(<span class="stringliteral">&quot;Malformed &quot;</span>) + <a class="code" href="namespace_f_i_x.html#a1e58900acd63ed8238c28ddb14218112">APP_DATA_DICTIONARY</a> + <span class="stringliteral">&quot;: &quot;</span> + key);
<a name="l00267"></a>00267         std::string beginStringQualifier = key.substr(offset+1);
<a name="l00268"></a>00268         DataDictionary dataDictionary = <a class="code" href="class_f_i_x_1_1_session_factory.html#a89ba37bd60a47e892bbac743cfa0dd51">createDataDictionary</a>(sessionID, settings, key);
<a name="l00269"></a>00269         provider.addApplicationDataDictionary(<a class="code" href="class_f_i_x_1_1_message.html#a505796085beb224575f57ff69302aff3">Message::toApplVerID</a>(beginStringQualifier), dataDictionary);
<a name="l00270"></a>00270       }
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272   }
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <a class="code" href="_call_stack_8h.html#ac6b0115ca0a0988c881219c711c9c57e">QF_STACK_POP</a>
<a name="l00275"></a>00275 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a72b2656f23894501a72a58347f904dfa"></a><!-- doxytag: member="FIX::SessionFactory::toApplVerID" ref="a72b2656f23894501a72a58347f904dfa" args="(const std::string &amp;value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string FIX::SessionFactory::toApplVerID </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>value</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Referenced by <a class="el" href="_message_8h_source.html#l00249">FIX::Message::toApplVerID()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a368d49b2e97b5f6670eb27c80fab5ed4"></a><!-- doxytag: member="FIX::SessionFactory::m_application" ref="a368d49b2e97b5f6670eb27c80fab5ed4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_i_x_1_1_application.html">Application</a>&amp; <a class="el" href="class_f_i_x_1_1_session_factory.html#a368d49b2e97b5f6670eb27c80fab5ed4">FIX::SessionFactory::m_application</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8h_source.html#l00078">78</a> of file <a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2473a148a225d28377aa38f12705a0ca"></a><!-- doxytag: member="FIX::SessionFactory::m_dictionaries" ref="a2473a148a225d28377aa38f12705a0ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_i_x_1_1_session_factory.html#a7bca6a48add52346062d066cbea4785a">Dictionaries</a> <a class="el" href="class_f_i_x_1_1_session_factory.html#a2473a148a225d28377aa38f12705a0ca">FIX::SessionFactory::m_dictionaries</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8h_source.html#l00081">81</a> of file <a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a>.</p>

<p>Referenced by <a class="el" href="_session_factory_8cpp_source.html#l00036">~SessionFactory()</a>.</p>

</div>
</div>
<a class="anchor" id="a025a98cade0657adb20d25e6209c6fa9"></a><!-- doxytag: member="FIX::SessionFactory::m_messageStoreFactory" ref="a025a98cade0657adb20d25e6209c6fa9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_i_x_1_1_message_store_factory.html">MessageStoreFactory</a>&amp; <a class="el" href="class_f_i_x_1_1_session_factory.html#a025a98cade0657adb20d25e6209c6fa9">FIX::SessionFactory::m_messageStoreFactory</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8h_source.html#l00079">79</a> of file <a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a>.</p>

</div>
</div>
<a class="anchor" id="a54e70754001525a06f47f882f8683a13"></a><!-- doxytag: member="FIX::SessionFactory::m_pLogFactory" ref="a54e70754001525a06f47f882f8683a13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_f_i_x_1_1_log_factory.html">LogFactory</a>* <a class="el" href="class_f_i_x_1_1_session_factory.html#a54e70754001525a06f47f882f8683a13">FIX::SessionFactory::m_pLogFactory</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_session_factory_8h_source.html#l00080">80</a> of file <a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>C:/Development/autobuild/vs7/quickfix/src/C++/<a class="el" href="_session_factory_8h_source.html">SessionFactory.h</a></li>
<li>C:/Development/autobuild/vs7/quickfix/src/C++/<a class="el" href="_session_factory_8cpp_source.html">SessionFactory.cpp</a></li>
</ul>
</div>
<hr><address><small>
Generated on Tue Apr 6 01:26:25 2010 for QuickFIX by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.6.3 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
